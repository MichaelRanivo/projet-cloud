name: Pipeline deployment Infra

run-name: ${{ github.actor }} is launching the deployment of the infra

on:
    push:
        branches:
            - terraform

jobs:
    terraform-back-plan:
        name: Plan the TF
        runs-on: self-host
        steps:
            - name: Checkout
              uses: actions/checkout@v3

            - name: 'Az CLI login'
              uses: azure/login@v1
              with:
                  client-id: ${{ secrets.AZURE_CLIENT_ID }}
                  tenant-id: ${{ secrets.AZURE_TENANT_ID }}
                  subscription-id: ${{ secrets.AZURE_SUBSCRIPTION_ID }}
          
            - name: 'Run Azure CLI commands'
              run: |
                  az account show
                  az group list
                  pwd 

            # - name: Setup Terraform
            #   uses: hashicorp/setup-terraform@v2

            # - name: Terraform Init
            #   run: terraform --version

    # back-apply:
    #     runs-on: self-host